From afed293c3ea13ea68dc4bb3368021b43be8f3e32 Mon Sep 17 00:00:00 2001
From: falkTX <falktx@gmail.com>
Date: Sun, 25 Feb 2018 23:42:43 +0100
Subject: [PATCH] Fix for built-in parameter widgets not always updating

---
 source/carla_skin.py           | 2 +-
 source/carla_widgets.py        | 2 +-
 source/widgets/paramspinbox.py | 8 ++++----
 3 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/source/carla_skin.py b/source/carla_skin.py
index 49eec8061..696690c92 100755
--- a/source/carla_skin.py
+++ b/source/carla_skin.py
@@ -1227,7 +1227,7 @@ def slot_knobCustomMenu(self):
         else:
             return
 
-        self.sender().setValue(value)
+        sender.setValue(value, True)
 
     #------------------------------------------------------------------
 
diff --git a/source/carla_widgets.py b/source/carla_widgets.py
index 4e43083c5..6013a1dcc 100755
--- a/source/carla_widgets.py
+++ b/source/carla_widgets.py
@@ -1409,7 +1409,7 @@ def slot_knobCustomMenu(self):
         else:
             return
 
-        self.sender().setValue(value)
+        sender.setValue(value, True)
 
     #------------------------------------------------------------------
 
diff --git a/source/widgets/paramspinbox.py b/source/widgets/paramspinbox.py
index ad89641c4..e7495923d 100644
--- a/source/widgets/paramspinbox.py
+++ b/source/widgets/paramspinbox.py
@@ -160,6 +160,9 @@ def setValue(self, value):
         else:
             vper = float(value - self.fMinimum) / div
 
+        if self.fValueCall is not None:
+            self.fValueCall(value)
+
         QProgressBar.setValue(self, int(vper * 10000))
 
     def setLabel(self, label):
@@ -192,10 +195,7 @@ def handleMouseEventPos(self, pos):
         elif value > self.fMaximum:
             value = self.fMaximum
 
-        if self.fValueCall is not None:
-            self.fValueCall(value)
-
-        self.valueChanged.emit(value)
+        self.setValue(value)
 
     def mousePressEvent(self, event):
         if event.button() == Qt.LeftButton:
